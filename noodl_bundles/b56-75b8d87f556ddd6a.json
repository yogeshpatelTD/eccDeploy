[{"name":"/#view/Samples Classification","nodes":[{"id":"614b50ce-d90b-a4cc-ac69-877b067cc09c","type":"Page","parameters":{},"ports":[],"children":[{"id":"740781ea-fb32-3f5f-12bc-5f6dbaa657f2","type":"Group","parameters":{"backgroundColor":"#FFFFFF","flexDirection":"row"},"ports":[],"children":[{"id":"be79acfe-0adb-f59c-c53f-b539f196ac35","type":"/#component/Sidebar","parameters":{},"ports":[],"children":[]},{"id":"19eb94e9-2263-cf69-d803-a4941f8049fa","type":"Group","parameters":{"sizeMode":"explicit"},"ports":[],"children":[{"id":"ceb9effc-f807-37fa-ca33-bafb123930b0","type":"Group","parameters":{"sizeMode":"explicit","height":{"value":60,"unit":"px"}},"ports":[],"children":[{"id":"225400d8-ccf4-7b20-ff16-f4ff96b33ff4","type":"/#component/navbar","parameters":{"pagename":"Samples Classification"},"ports":[],"children":[]}]},{"id":"f9db1b6a-899d-e0d4-011a-c2ccf9e4ac32","type":"Group","parameters":{"paddingLeft":{"value":15,"unit":"px"},"paddingRight":{"value":15,"unit":"px"},"paddingTop":{"value":15,"unit":"px"}},"ports":[],"children":[{"id":"5778882c-08ff-0900-629d-a625c5123f83","type":"Group","parameters":{"sizeMode":"contentHeight","flexDirection":"row"},"ports":[],"children":[{"id":"8d8c797e-fd8c-8ac6-df25-e92ae9604910","type":"net.noodl.controls.options","parameters":{"useLabel":false,"height":{"value":35,"unit":"px"},"fontSize":{"value":14,"unit":"px"},"width":{"value":200,"unit":"px"},"placeholder":"Select Project No."},"ports":[],"children":[]},{"id":"eff62f47-ba96-19dc-6a9d-e5ccae613802","type":"net.noodl.controls.button","parameters":{"alignX":"right","height":{"value":35,"unit":"px"},"paddingLeft":{"value":20,"unit":"px"},"paddingRight":{"value":20,"unit":"px"},"label":"Save All","backgroundColor":"Primary ECC","minWidth":{"value":0,"unit":"px"}},"ports":[],"children":[]}]},{"id":"426df94c-dd61-1dd1-0c5f-1469b9cfd788","type":"Group","parameters":{},"ports":[],"children":[{"id":"882d09f6-31b5-a291-2e51-e907efeeda76","type":"/#component/Table","parameters":{"Items":"[\n    {\n        \"HA\": \"6\",\n        \"Sample ID\": \"SAM-001\",\n        \"Type\": \"Wall Plaster\",\n        \"Location\": \"Cellar-Columns\",\n        \"PLM\": true,\n        \"PLM/NOB\": true,\n        \"Action\": \"SAM-001\",\n        \"TEM/NOB\":false\n    },\n    {\n        \"HA\": \"11\",\n        \"Sample ID\": \"SAM-002\",\n        \"Type\": \"Ceiling tile (2'x2')\",\n        \"Location\": \"Ceiling in Basement\",\n        \"PLM\": false,\n        \"PLM/NOB\": true,\n        \"Action\": \"SAM-002\",\n        \"TEM/NOB\":false\n    },\n    {\n        \"HA\": \"9\",\n        \"Sample ID\": \"SAM-003\",\n        \"Type\": \"Wall Plaster\",\n        \"Location\": \"2nd Floor\",\n        \"PLM\": true,\n        \"PLM/NOB\": false,\n        \"Action\": \"SAM-003\",\n        \"TEM/NOB\":false\n    },\n    {\n        \"HA\": \"5\",\n        \"Sample ID\": \"SAM-004\",\n        \"Type\": \"Floor tile\",\n        \"Location\": \"1st Floor-Storage Areas\",\n        \"PLM\": false,\n        \"PLM/NOB\": true,\n        \"Action\": \"SAM-004\",\n        \"TEM/NOB\":true\n    },\n    \n    \n]\n","Margin Top":{"value":20,"unit":"px"},"Headers":"[\r\n  \r\n  {\r\n    Field: 'HA',\r\n    Label: 'HA',\r\n  },\r\n  {\r\n    Field: 'Sample ID',\r\n    Label: 'Sample ID',\r\n  },\r\n  {\r\n    Field: 'Type',\r\n    Label: 'Type',\r\n  },\r\n  {\r\n    Field: 'Location',\r\n    Label: 'Location',\r\n  },\r\n  \r\n  {\r\n    Field: 'PLM',\r\n    Label: 'PLM',\r\n  },\r\n  {\r\n    Field: 'PLM/NOB',\r\n    Label: 'PLM/NOB',\r\n  },\r\n  {\r\n    Field: 'TEM/NOB',\r\n    Label: 'TEM/NOB',\r\n  },\r\n  {\r\n    Field: 'Action',\r\n    Label: 'Action',\r\n    Type: 'Button sample',\r\n  },\r\n]\r\n","Margin Bottom":{"value":0,"unit":"px"},"Max Height":{"value":80,"unit":"vh"}},"ports":[],"children":[]}]}]}]}]}]},{"id":"a4e97765-2007-3d65-2eac-80b2cd5b2b16","type":"PageInputs","parameters":{},"ports":[],"children":[]},{"id":"5a0c45d1-97e1-da7b-dd3b-057e9c210854","type":"Set Variable","parameters":{"setWith":"string","name":"currentPage","value":"classification"},"ports":[],"children":[]},{"id":"cafcecef-ae4c-a18c-0a86-53d2c042a612","type":"Model2","parameters":{"modelId":"currentUser","properties":"company"},"ports":[],"children":[]},{"id":"5965c52b-a93a-d35a-7457-f4f8e1b0f65b","type":"JavaScriptFunction","parameters":{"functionScript":"if(! Inputs.companyId) return;\r\nconst supabase = Noodl.Variables.supabase;\r\nif (!supabase) throw new Error('Supabase client not found');\r\nconst companyId = Inputs.companyId;\r\nconst userManagerDataList = [];\r\n\r\ntry {\r\n  const { data, error } = await supabase\r\n    .from('inspection_request')\r\n    .select()\r\n    .eq('company_id', companyId)\r\n    .eq('status','closed')\r\n    .order('project_number', { ascending: false });\r\n\r\n  if (error) {\r\n    console.error(error);\r\n    Outputs.Failure();\r\n  } else {\r\n    data.forEach((user) => {\r\n      const userData = {\r\n        Label: user.project_number || '-',\r\n        Value: String(user.id) || 'N/A'\r\n      };\r\n\r\n      userManagerDataList.push(userData);\r\n    });\r\n\r\n    Outputs.INSPECT = userManagerDataList;\r\n    console.log(userManagerDataList)\r\n    Outputs.Success();\r\n  }\r\n} catch (error) {\r\n  console.error(error);\r\n  Outputs.Failure();\r\n}\r\n"},"ports":[{"name":"in-companyId","displayName":"companyId","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-INSPECT","displayName":"INSPECT","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"a086676c-242b-6abd-3ab2-5a25b6fbd416","type":"/#component/loading","parameters":{},"ports":[],"children":[]},{"id":"658cca16-b65f-59f8-0fbd-7a31f7c39ba7","type":"JavaScriptFunction","parameters":{"functionScript":"if(!Inputs.Triggered)return;\r\nconst supabase = Noodl.Variables.supabase;\r\n\r\nif (!supabase) throw new Error('Supabase client not found');\r\nconst inspection = Inputs.Inspection\r\nconst limit = parseInt(Inputs.Limit)\r\nconst offset = Inputs.Offset\r\n\r\ntry {\r\n  const { data, error } = await supabase\r\n                          .from('samples_collected')\r\n                          .select()\r\n                          .eq(\"inspection_request_id\",inspection)\r\n                          .order('homogenious_area_num', { ascending: true })\r\n                          .order('sample_id', { ascending: true });\r\n                          // .range(offset, offset + limit - 1);\r\n\r\n  if (error) {\r\n    console.error(error)\r\n    Outputs.Failure();\r\n  } else {\r\n    Outputs.Samples = data;\r\n    console.log(data)\r\n    if(data.length > 0){\r\n      Outputs.Success();\r\n    }\r\n    \r\n  }\r\n} catch (error) {\r\n    console.error(error)\r\n  Outputs.Failure();\r\n}\r\n"},"ports":[{"name":"in-Triggered","displayName":"Triggered","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-Inspection","displayName":"Inspection","plug":"input","type":"*","group":"Inputs","index":5},{"name":"in-Limit","displayName":"Limit","plug":"input","type":"*","group":"Inputs","index":6},{"name":"in-Offset","displayName":"Offset","plug":"input","type":"*","group":"Inputs","index":7},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":9},{"name":"out-Samples","displayName":"Samples","plug":"output","type":"*","group":"Outputs","index":10}],"children":[]},{"id":"aa766e8b-651f-de2c-9e39-820e363037b4","type":"JavaScriptFunction","parameters":{"functionScript":"const width = Inputs.width\r\nif (width > 800){\r\n    Outputs.Height = 70\r\n    Outputs.Field = true\r\n    Outputs.header = [\r\n  \r\n  {\r\n    Field: 'homogenious_area_num',\r\n    Label: 'HA',\r\n    Type: 'ha',\r\n  },\r\n  {\r\n    Field: 'sample_id',\r\n    Label: 'Sample ID',\r\n    Type: 'sample',\r\n  },\r\n  {\r\n    Field: 'material_name',\r\n    Label: 'Material',\r\n  },\r\n  {\r\n    Field: 'location_in_building',\r\n    Label: 'Location',\r\n  },\r\n  \r\n  {\r\n    Field: 'test_type_plm',\r\n    Label: 'PLM',\r\n  },\r\n  {\r\n    Field: 'test_type_plm_nob',\r\n    Label: 'PLM/NOB',\r\n  },\r\n  {\r\n    Field: 'test_type_tem_nob',\r\n    Label: 'TEM/NOB',\r\n  },\r\n  {\r\n    Field: 'test_type_pacm',\r\n    Label: 'PACM',\r\n  },\r\n  {\r\n    Field: 'id',\r\n    Label: 'Classification',\r\n    Type: 'Classification',\r\n  },\r\n]\r\n\r\n\r\n}\r\nelse {\r\n    Outputs.Height = 64\r\n    Outputs.Field = false\r\n    Outputs.header = [\r\n  \r\n  {\r\n    Field: 'homogenious_area_num',\r\n    Label: 'HA',\r\n    Type: 'ha',\r\n  },\r\n  {\r\n    Field: 'sample_id',\r\n    Label: 'Sample ID',\r\n    Type: 'sample',\r\n  },\r\n  {\r\n    Field: 'material_name',\r\n    Label: 'Material',\r\n  },\r\n  {\r\n    Field: 'id',\r\n    Label: 'Classification',\r\n    Type: 'Classification',\r\n  },\r\n]\r\n\r\n\r\n}","scriptInputs":[{"id":"42or","label":"width"}],"intype-width":"number","scriptOutputs":[{"id":"3ii6","label":"header"}],"outtype-header":"array"},"ports":[{"name":"outtype-header","displayName":"Type","editorName":"header | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"},{"value":"signal","label":"Signal"}],"allowEditOnly":true},"default":"string","parent":"scriptOutputs","parentItemId":"3ii6","index":4},{"name":"out-header","displayName":"header","plug":"output","type":"array","group":"Outputs","index":5},{"name":"intype-width","displayName":"Type","editorName":"width | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"}],"allowEditOnly":true},"default":"string","parent":"scriptInputs","parentItemId":"42or","index":6},{"name":"in-width","displayName":"width","plug":"input","type":"number","group":"Inputs","index":7},{"name":"out-Height","displayName":"Height","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-Field","displayName":"Field","plug":"output","type":"*","group":"Outputs","index":9}],"children":[]},{"id":"74acbb48-7d3a-aa3b-020d-cfb1a256d4b6","type":"States","parameters":{"states":"hide,show","values":"mount","type-mount":"boolean","value-show-mount":true,"currentState":"hide","type-dropValue":"number","value-hide-dropValue":" -1"},"ports":[],"children":[]},{"id":"066f6dbe-68d7-a31a-75a9-2d9cf0b449cb","type":"Event Sender","parameters":{"channelName":"classification"},"ports":[],"children":[]},{"id":"575dbe2a-bd36-68d9-6564-bedfb10e00e4","type":"Event Receiver","parameters":{"channelName":"classification updated"},"ports":[],"children":[]},{"id":"2c0c6c0e-fb67-b80d-592c-5c040d54a9e5","type":"/#component/Show Toast","parameters":{"Message":"Samples Updated Successfully","Type":"Success"},"ports":[],"children":[]},{"id":"407741f6-5717-6760-4721-ba827a983aa5","type":"RouterNavigate","parameters":{"router":"login","target":"/#view/Samples Classification"},"ports":[],"children":[]}],"connections":[{"sourceId":"614b50ce-d90b-a4cc-ac69-877b067cc09c","sourcePort":"boundingWidth","targetId":"be79acfe-0adb-f59c-c53f-b539f196ac35","targetPort":"width"},{"sourceId":"614b50ce-d90b-a4cc-ac69-877b067cc09c","sourcePort":"boundingWidth","targetId":"225400d8-ccf4-7b20-ff16-f4ff96b33ff4","targetPort":"width"},{"sourceId":"614b50ce-d90b-a4cc-ac69-877b067cc09c","sourcePort":"didMount","targetId":"5a0c45d1-97e1-da7b-dd3b-057e9c210854","targetPort":"do"},{"sourceId":"614b50ce-d90b-a4cc-ac69-877b067cc09c","sourcePort":"didMount","targetId":"be79acfe-0adb-f59c-c53f-b539f196ac35","targetPort":"clasi"},{"sourceId":"cafcecef-ae4c-a18c-0a86-53d2c042a612","sourcePort":"prop-company","targetId":"5965c52b-a93a-d35a-7457-f4f8e1b0f65b","targetPort":"in-companyId"},{"sourceId":"5965c52b-a93a-d35a-7457-f4f8e1b0f65b","sourcePort":"out-INSPECT","targetId":"8d8c797e-fd8c-8ac6-df25-e92ae9604910","targetPort":"items"},{"sourceId":"5965c52b-a93a-d35a-7457-f4f8e1b0f65b","sourcePort":"out-Success","targetId":"a086676c-242b-6abd-3ab2-5a25b6fbd416","targetPort":"close"},{"sourceId":"8d8c797e-fd8c-8ac6-df25-e92ae9604910","sourcePort":"value","targetId":"658cca16-b65f-59f8-0fbd-7a31f7c39ba7","targetPort":"in-Inspection"},{"sourceId":"8d8c797e-fd8c-8ac6-df25-e92ae9604910","sourcePort":"onChange","targetId":"658cca16-b65f-59f8-0fbd-7a31f7c39ba7","targetPort":"in-Triggered"},{"sourceId":"658cca16-b65f-59f8-0fbd-7a31f7c39ba7","sourcePort":"out-Samples","targetId":"882d09f6-31b5-a291-2e51-e907efeeda76","targetPort":"Items"},{"sourceId":"614b50ce-d90b-a4cc-ac69-877b067cc09c","sourcePort":"boundingWidth","targetId":"aa766e8b-651f-de2c-9e39-820e363037b4","targetPort":"in-width"},{"sourceId":"aa766e8b-651f-de2c-9e39-820e363037b4","sourcePort":"out-header","targetId":"882d09f6-31b5-a291-2e51-e907efeeda76","targetPort":"Headers"},{"sourceId":"74acbb48-7d3a-aa3b-020d-cfb1a256d4b6","sourcePort":"mount","targetId":"426df94c-dd61-1dd1-0c5f-1469b9cfd788","targetPort":"mounted"},{"sourceId":"658cca16-b65f-59f8-0fbd-7a31f7c39ba7","sourcePort":"out-Success","targetId":"74acbb48-7d3a-aa3b-020d-cfb1a256d4b6","targetPort":"to-show"},{"sourceId":"eff62f47-ba96-19dc-6a9d-e5ccae613802","sourcePort":"onClick","targetId":"066f6dbe-68d7-a31a-75a9-2d9cf0b449cb","targetPort":"sendEvent"},{"sourceId":"74acbb48-7d3a-aa3b-020d-cfb1a256d4b6","sourcePort":"mount","targetId":"eff62f47-ba96-19dc-6a9d-e5ccae613802","targetPort":"mounted"},{"sourceId":"8d8c797e-fd8c-8ac6-df25-e92ae9604910","sourcePort":"onChange","targetId":"74acbb48-7d3a-aa3b-020d-cfb1a256d4b6","targetPort":"to-hide"},{"sourceId":"cafcecef-ae4c-a18c-0a86-53d2c042a612","sourcePort":"prop-company","targetId":"a086676c-242b-6abd-3ab2-5a25b6fbd416","targetPort":"show"},{"sourceId":"575dbe2a-bd36-68d9-6564-bedfb10e00e4","sourcePort":"eventReceived","targetId":"407741f6-5717-6760-4721-ba827a983aa5","targetPort":"navigate"},{"sourceId":"eff62f47-ba96-19dc-6a9d-e5ccae613802","sourcePort":"onClick","targetId":"a086676c-242b-6abd-3ab2-5a25b6fbd416","targetPort":"show"},{"sourceId":"575dbe2a-bd36-68d9-6564-bedfb10e00e4","sourcePort":"eventReceived","targetId":"a086676c-242b-6abd-3ab2-5a25b6fbd416","targetPort":"close"}],"ports":[],"roots":["614b50ce-d90b-a4cc-ac69-877b067cc09c"]}]