[{"name":"/#view/Companies","nodes":[{"id":"87d503ac-3aa5-be87-50df-5411ac8c9d85","type":"Page","parameters":{},"ports":[],"children":[{"id":"51e5d3a7-1587-7c5f-43cc-776f2263b0da","type":"Group","parameters":{"backgroundColor":"#FFFFFF","flexDirection":"row"},"ports":[],"children":[{"id":"58004128-8d71-132b-f968-49fe6fa3b8f0","type":"/#component/Sidebar","parameters":{},"ports":[],"children":[]},{"id":"f65889b3-5346-ea24-e4bd-4ce5bad20d0c","type":"Group","parameters":{"sizeMode":"explicit"},"ports":[],"children":[{"id":"7b78756e-f3e0-a2d7-0fe0-a52060cfd474","type":"Group","parameters":{"sizeMode":"explicit","height":{"value":60,"unit":"px"}},"ports":[],"children":[{"id":"1d8e7787-af31-0ced-aa14-66e7ae9892d5","type":"/#component/navbar","parameters":{"pagename":"Companies List"},"ports":[],"children":[]}]},{"id":"f2845c18-8805-e90e-75ef-22311708746d","type":"Group","parameters":{"paddingLeft":{"value":15,"unit":"px"},"paddingRight":{"value":15,"unit":"px"},"paddingTop":{"value":15,"unit":"px"}},"ports":[],"children":[{"id":"8fef72fb-bc3d-3a3b-43de-d4ab2cfcff5b","type":"net.noodl.controls.button","parameters":{"alignX":"right","label":"Add Company","useIcon":true,"iconIconSource":{"class":"material-icons","code":"add","codeAsClass":false},"minWidth":{"value":0,"unit":"px"},"paddingLeft":{"value":15,"unit":"px"},"paddingRight":{"value":15,"unit":"px"},"backgroundColor":"Primary ECC"},"ports":[],"children":[]},{"id":"e7eeee41-ec88-8ef9-0e76-8aa830e98ada","type":"/#component/Table","parameters":{"Margin Top":{"value":20,"unit":"px"},"Headers":"[\r\n  {\r\n    Field: 'company_name',\r\n    Label: 'Company',\r\n  },\r\n  {\r\n    Field: 'contact_person',\r\n    Label: 'Contact Person',\r\n  },\r\n  {\r\n    Field: 'contact_number',\r\n    Label: 'Number',\r\n  },\r\n  {\r\n    Field: 'contact_email',\r\n    Label: 'Email',\r\n  },\r\n  {\r\n    Field: 'subscription_plan',\r\n    Label: 'Subscription',\r\n  },\r\n  {\r\n    Field: 'expires_at',\r\n    Label: 'Expires Date',\r\n  },\r\n  \r\n]"},"ports":[],"children":[]}]}]}]}]},{"id":"77acf9f5-d27c-3d7f-2a77-629bad38b893","type":"PageInputs","parameters":{},"ports":[],"children":[]},{"id":"7609a478-7642-a26e-29b7-51a4927347a3","type":"JavaScriptFunction","parameters":{"functionScript":"const width = Inputs.width\r\nif (width > 800){\r\n    Outputs.header = [\r\n  {\r\n    Field: 'company_name',\r\n    Label: 'Company',\r\n  },\r\n  {\r\n    Field: 'contact_person',\r\n    Label: 'Contact Person',\r\n  },\r\n  {\r\n    Field: 'contact_number',\r\n    Label: 'Number',\r\n  },\r\n  {\r\n    Field: 'contact_email',\r\n    Label: 'Email',\r\n  },\r\n  {\r\n    Field: 'subscription_plan',\r\n    Label: 'Subscription',\r\n  },\r\n  {\r\n    Field: 'expires_at',\r\n    Label: 'Expires Date',\r\n  },\r\n  \r\n]\r\n\r\n\r\n}\r\nelse {\r\n    Outputs.header = [\r\n  {\r\n    Field: 'company_name',\r\n    Label: 'Company',\r\n  },\r\n  {\r\n    Field: 'contact_person',\r\n    Label: 'Contact Person',\r\n  },\r\n  {\r\n    Field: 'contact_number',\r\n    Label: 'Number',\r\n  },\r\n  {\r\n    Field: 'contact_email',\r\n    Label: 'Email',\r\n  }\r\n  \r\n]\r\n\r\n\r\n}","scriptInputs":[{"id":"42or","label":"width"}],"intype-width":"number","scriptOutputs":[{"id":"3ii6","label":"header"}],"outtype-header":"array"},"ports":[{"name":"outtype-header","displayName":"Type","editorName":"header | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"},{"value":"signal","label":"Signal"}],"allowEditOnly":true},"default":"string","parent":"scriptOutputs","parentItemId":"3ii6","index":4},{"name":"out-header","displayName":"header","plug":"output","type":"array","group":"Outputs","index":5},{"name":"intype-width","displayName":"Type","editorName":"width | Type","plug":"input","type":{"name":"enum","enums":[{"value":"string","label":"String"},{"value":"boolean","label":"Boolean"},{"value":"number","label":"Number"},{"value":"object","label":"Object"},{"value":"date","label":"Date"},{"value":"array","label":"Array"},{"value":"color","label":"Color"}],"allowEditOnly":true},"default":"string","parent":"scriptInputs","parentItemId":"42or","index":6},{"name":"in-width","displayName":"width","plug":"input","type":"number","group":"Inputs","index":7}],"children":[]},{"id":"cf42a885-ef44-8576-062f-33563905c322","type":"JavaScriptFunction","parameters":{"functionScript":"\r\nconst supabase = Noodl.Variables.supabase;\r\n\r\nif (!supabase) throw new Error('Supabase client not found');\r\n\r\ntry {\r\n  const { data, error } = await supabase.from('company_master').select('*');\r\n\r\n  if (error) {\r\n    console.error(error)\r\n    Outputs.Failure();\r\n  } else {\r\n    Outputs.Companies = data;\r\n    Outputs.Success();\r\n  }\r\n} catch (error) {\r\n    console.error(error)\r\n  Outputs.Failure();\r\n}\r\n"},"ports":[{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":4},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Companies","displayName":"Companies","plug":"output","type":"*","group":"Outputs","index":6}],"children":[]},{"id":"286b9b39-6da3-cf28-8e0f-9a47943858d5","type":"RouterNavigate","parameters":{"router":"login","target":"/#Add/Add Company"},"ports":[],"children":[]},{"id":"72c738d4-e304-ab15-c1d5-8b402dd54a4a","type":"JavaScriptFunction","parameters":{"functionScript":"const role = Inputs.Role\r\nif (role != 1){\r\n    Outputs.Navigate();\r\n}\r\nelse{\r\n    Outputs.ShowLoading();\r\n}"},"ports":[{"name":"in-Role","displayName":"Role","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Navigate","displayName":"Navigate","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-ShowLoading","displayName":"ShowLoading","plug":"output","type":"signal","group":"Outputs","index":6}],"children":[]},{"id":"8e8a7a92-860e-3a46-1c99-09816f4e80eb","type":"Model2","parameters":{"modelId":"currentUser","properties":"role"},"ports":[],"children":[]},{"id":"cc2ed77e-3815-090e-abb1-54a613833754","type":"RouterNavigate","parameters":{"router":"login","target":"/#view/Field Staff View"},"ports":[],"children":[]},{"id":"cdc630ad-08c4-7acd-6054-018d30c36823","type":"/#component/loading","parameters":{},"ports":[],"children":[]}],"connections":[{"sourceId":"87d503ac-3aa5-be87-50df-5411ac8c9d85","sourcePort":"boundingWidth","targetId":"58004128-8d71-132b-f968-49fe6fa3b8f0","targetPort":"width"},{"sourceId":"87d503ac-3aa5-be87-50df-5411ac8c9d85","sourcePort":"boundingWidth","targetId":"1d8e7787-af31-0ced-aa14-66e7ae9892d5","targetPort":"width"},{"sourceId":"cf42a885-ef44-8576-062f-33563905c322","sourcePort":"out-Companies","targetId":"e7eeee41-ec88-8ef9-0e76-8aa830e98ada","targetPort":"Items"},{"sourceId":"87d503ac-3aa5-be87-50df-5411ac8c9d85","sourcePort":"boundingWidth","targetId":"7609a478-7642-a26e-29b7-51a4927347a3","targetPort":"in-width"},{"sourceId":"7609a478-7642-a26e-29b7-51a4927347a3","sourcePort":"out-header","targetId":"e7eeee41-ec88-8ef9-0e76-8aa830e98ada","targetPort":"Headers"},{"sourceId":"8fef72fb-bc3d-3a3b-43de-d4ab2cfcff5b","sourcePort":"onClick","targetId":"286b9b39-6da3-cf28-8e0f-9a47943858d5","targetPort":"navigate"},{"sourceId":"8e8a7a92-860e-3a46-1c99-09816f4e80eb","sourcePort":"prop-role","targetId":"72c738d4-e304-ab15-c1d5-8b402dd54a4a","targetPort":"in-Role"},{"sourceId":"72c738d4-e304-ab15-c1d5-8b402dd54a4a","sourcePort":"out-Navigate","targetId":"cc2ed77e-3815-090e-abb1-54a613833754","targetPort":"navigate"},{"sourceId":"cf42a885-ef44-8576-062f-33563905c322","sourcePort":"out-Success","targetId":"cdc630ad-08c4-7acd-6054-018d30c36823","targetPort":"close"},{"sourceId":"cc2ed77e-3815-090e-abb1-54a613833754","sourcePort":"navigated","targetId":"cdc630ad-08c4-7acd-6054-018d30c36823","targetPort":"close"},{"sourceId":"72c738d4-e304-ab15-c1d5-8b402dd54a4a","sourcePort":"out-ShowLoading","targetId":"cdc630ad-08c4-7acd-6054-018d30c36823","targetPort":"show"}],"ports":[],"roots":["87d503ac-3aa5-be87-50df-5411ac8c9d85"]}]