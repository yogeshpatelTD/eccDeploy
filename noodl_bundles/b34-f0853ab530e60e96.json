[{"name":"/test","nodes":[{"id":"f2e39634-7e23-fcec-d47e-9f4b682536d3","type":"Page","parameters":{},"ports":[],"children":[{"id":"f5f1183e-c196-dbd7-e9fa-f2a65fd0db88","type":"/#component/Rating/Rating Star Item","parameters":{},"ports":[],"children":[]},{"id":"38c16162-49b1-a7d0-c78c-817f03b6c7ac","type":"/#component/Rating","parameters":{},"ports":[],"children":[]},{"id":"d8dc292c-71b0-8aff-b946-b0798da51590","type":"Group","parameters":{"sizeMode":"contentHeight","alignItems":"center","mounted":true},"ports":[],"children":[{"id":"a1194923-166d-0672-238c-a8de495fe99a","type":"net.noodl.controls.textinput","parameters":{"startValue":"5"},"ports":[],"children":[]}]},{"id":"38d0b056-ae8c-446c-4636-bf7f70ba3742","type":"net.noodl.controls.button","parameters":{"label":"appstate"},"ports":[],"children":[]},{"id":"064a555e-6da4-addd-4778-4256cdc3665d","type":"Text","parameters":{},"ports":[],"children":[]},{"id":"7a115e2f-798f-6f29-d138-2fd7a3d9a5a5","type":"Group","parameters":{"sizeMode":"explicit","borderColor":"#DFDFDF00","borderWidth":{"value":16,"unit":"px"},"alignX":"center","width":{"value":120,"unit":"px"},"height":{"value":120,"unit":"px"},"borderTopStyle":"solid","borderTopWidth":{"value":16,"unit":"px"},"borderRadius":{"value":50,"unit":"%"},"borderStyle":"solid","mounted":false},"ports":[],"children":[{"id":"1e841066-b00d-3885-a728-aac7b3d5aac4","type":"Group","parameters":{"borderStyle":"solid","borderWidth":{"value":10,"unit":"px"},"borderColor":"Primary ECC","borderRadius":{"value":20,"unit":"%"},"cssClassName":"loader"},"ports":[],"children":[{"id":"e270916d-9cc2-6f96-f069-51a473c832df","type":"Image","parameters":{"src":"ecclogo.png","position":"relative","sizeMode":"explicit","alignX":"center","marginLeft":{"value":8,"unit":"px"}},"ports":[],"children":[]}]}]},{"id":"178a8b9e-0496-d9e2-9ac9-7e6cbfeab5c5","type":"net.noodl.controls.button","parameters":{"alignX":"center","label":"function"},"ports":[],"children":[]},{"id":"fa5ecc74-1f5f-f93a-10c0-8f321ac93049","type":"net.noodl.controls.textinput","parameters":{"label":"inspection id"},"ports":[],"children":[]}]},{"id":"1208306a-cfa6-5aee-0816-6c63258fbce6","type":"PageInputs","parameters":{},"ports":[],"children":[]},{"id":"dff7569a-138a-be08-3717-b54cf3fb0c15","type":"Javascript2","parameters":{"code":"Script.Signals.RecoverAppState = function () {\n    if (localStorage.getItem('AppState') !== null) {\n        // AppState is set, you can access its value\n        Noodl.Variables.AppState = localStorage.getItem('AppState');\n        Script.Outputs.value = (Noodl.Variables.AppState)\n    } else {\n        // AppState is not set in localStorage\n        Script.Outputs.value = 'AppStateIsNotSet';\n    }\n}\n\nScript.Signals.SetAppState = function () {\n    const language = Script.Inputs['AppState value to set']\n    localStorage.setItem('AppState', language)\n    Noodl.Variables.AppState = language\n}"},"ports":[{"name":"RecoverAppState","plug":"input","type":{"name":"signal"},"group":"Inputs","index":5},{"name":"SetAppState","plug":"input","type":{"name":"signal"},"group":"Inputs","index":6},{"name":"AppState value to set","displayName":"AppState value to set","plug":"inputs","type":"*","group":"Inputs","index":7},{"name":"value","displayName":"value","plug":"output","type":"*","group":"Outputs","index":8}],"children":[]},{"id":"1d03e8d6-2971-9e48-541f-286ab38c349d","type":"JavaScriptFunction","parameters":{"functionScript":"if(!Inputs.Triggered) return;\r\nconst supabase = Noodl.Variables.supabase;\r\n\r\nif (!supabase) throw new Error('Supabase client not found');\r\nconst id = 8\r\n\r\ntry {\r\n  const { data, error } = await supabase\r\n                                .from('samples_collected')\r\n                                .select(`\r\n                                            *,\r\n                                            inspection_request (\r\n                                            *\r\n                                            )\r\n                                        `)\r\n                                .eq('id', id);\r\n\r\n  if (error) {\r\n    console.error(error)\r\n    Outputs.Failure();\r\n  } else {\r\n    Outputs.Companies = data;\r\n    Outputs.Success();\r\n  }\r\n} catch (error) {\r\n    console.error(error)\r\n  Outputs.Failure();\r\n}"},"ports":[{"name":"in-Triggered","displayName":"Triggered","plug":"input","type":"*","group":"Inputs","index":4},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":5},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Companies","displayName":"Companies","plug":"output","type":"*","group":"Outputs","index":7}],"children":[]},{"id":"970903ac-499a-a289-37fe-9f33a2ab01b0","type":"JavaScriptFunction","parameters":{"functionScript":"if(!Inputs.Triggered) return;\r\nconst supabase = Noodl.Variables.supabase;\r\n\r\nif (!supabase) throw new Error('Supabase client not found');\r\nconst inspection = parseInt(Inputs.Limit);\r\n\r\ntry {\r\n  const { data, error } = await supabase\r\n                          .rpc('update_sample_ids', {\r\n                            p_inspection_request_id: inspection\r\n                            });\r\n\r\n  if (error) {\r\n    console.error(error)\r\n    Outputs.Failure();\r\n  } else {\r\n    \r\n    Outputs.Success();\r\n  }\r\n} catch (error) {\r\n    console.error(error)\r\n  Outputs.Failure();\r\n}\r\n  ///if is closed\r\n\r\n"},"ports":[{"name":"in-Triggered","displayName":"Triggered","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-Limit","displayName":"Limit","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7}],"children":[]},{"id":"c8d341b4-14f3-b47e-e719-d510d241a765","type":"/#component/Show Toast","parameters":{"Type":"Success","Message":"data updated"},"ports":[],"children":[]}],"connections":[{"sourceId":"dff7569a-138a-be08-3717-b54cf3fb0c15","sourcePort":"value","targetId":"064a555e-6da4-addd-4778-4256cdc3665d","targetPort":"text"},{"sourceId":"a1194923-166d-0672-238c-a8de495fe99a","sourcePort":"onTextChanged","targetId":"dff7569a-138a-be08-3717-b54cf3fb0c15","targetPort":"AppState value to set"},{"sourceId":"a1194923-166d-0672-238c-a8de495fe99a","sourcePort":"onEnter","targetId":"dff7569a-138a-be08-3717-b54cf3fb0c15","targetPort":"SetAppState"},{"sourceId":"38d0b056-ae8c-446c-4636-bf7f70ba3742","sourcePort":"onClick","targetId":"dff7569a-138a-be08-3717-b54cf3fb0c15","targetPort":"RecoverAppState"},{"sourceId":"fa5ecc74-1f5f-f93a-10c0-8f321ac93049","sourcePort":"onTextChanged","targetId":"970903ac-499a-a289-37fe-9f33a2ab01b0","targetPort":"in-Limit"},{"sourceId":"970903ac-499a-a289-37fe-9f33a2ab01b0","sourcePort":"out-Success","targetId":"c8d341b4-14f3-b47e-e719-d510d241a765","targetPort":"Do"},{"sourceId":"178a8b9e-0496-d9e2-9ac9-7e6cbfeab5c5","sourcePort":"onClick","targetId":"970903ac-499a-a289-37fe-9f33a2ab01b0","targetPort":"in-Triggered"}],"ports":[],"roots":["f2e39634-7e23-fcec-d47e-9f4b682536d3"]},{"name":"/#component/Rating/Rating Star Item","nodes":[{"id":"95859f66-e8c5-b0f9-b437-51778f511f01","type":"Group","parameters":{"sizeMode":"contentSize","styleCss":"cursor:pointer;"},"stateParameters":{"hover":{"transformScale":1.2}},"defaultStateTransitions":{"hover":{"curve":[0,0,0.58,1],"dur":150,"delay":0},"neutral":{"curve":[0,0,0.58,1],"dur":150,"delay":0}},"ports":[],"children":[{"id":"2d472939-5d26-ffb4-3d81-ae04327bf886","type":"net.noodl.visual.icon","parameters":{"iconSize":{"value":32,"unit":"px"},"iconColor":"Notice","iconIconSource":{"class":"material-icons","code":"star_border"}},"ports":[],"children":[]},{"id":"7cf98950-e540-0c09-2506-30106861f17b","type":"net.noodl.visual.icon","parameters":{"iconSize":{"value":32,"unit":"px"},"iconColor":"Notice","iconIconSource":{"class":"material-icons","code":"star"}},"ports":[],"children":[]}]},{"id":"46f9b71a-91c9-d897-591a-cfa1a155bee0","type":"net.noodl.ParentComponentObject","parameters":{"properties":"index hover,Icon size"},"ports":[],"children":[]},{"id":"3579c279-7922-12ac-9f31-e5f09b10ad70","type":"Expression","parameters":{"expression":"thisIndex > hoverIndex\n"},"ports":[],"children":[]},{"id":"ed5cb279-cf73-edbd-63bc-425bb9870642","type":"States","parameters":{"states":"filled,outlined","currentState":"outlined","useTransitions":true},"ports":[],"children":[]},{"id":"0c8695ef-658a-4551-f458-21c099276448","type":"Condition","parameters":{},"ports":[],"children":[]},{"id":"d8d3274f-4292-6fb5-3347-1d7dc2a450a9","type":"net.noodl.SetParentComponentObjectProperties","parameters":{"properties":"index hover"},"ports":[],"children":[]},{"id":"f7b3ff0f-9d06-209e-c86a-7dfb28a74c98","type":"net.noodl.SetParentComponentObjectProperties","parameters":{"properties":"index hover,saved index,Icon size"},"ports":[],"children":[]},{"id":"58032a6e-908e-7cdc-3eb5-1b10185aa84c","type":"Number","parameters":{"value":32},"ports":[],"children":[]}],"connections":[{"sourceId":"46f9b71a-91c9-d897-591a-cfa1a155bee0","sourcePort":"value-index hover","targetId":"3579c279-7922-12ac-9f31-e5f09b10ad70","targetPort":"hoverIndex"},{"sourceId":"95859f66-e8c5-b0f9-b437-51778f511f01","sourcePort":"childIndex","targetId":"3579c279-7922-12ac-9f31-e5f09b10ad70","targetPort":"thisIndex"},{"sourceId":"ed5cb279-cf73-edbd-63bc-425bb9870642","sourcePort":"at-outlined","targetId":"2d472939-5d26-ffb4-3d81-ae04327bf886","targetPort":"mounted"},{"sourceId":"ed5cb279-cf73-edbd-63bc-425bb9870642","sourcePort":"at-filled","targetId":"7cf98950-e540-0c09-2506-30106861f17b","targetPort":"mounted"},{"sourceId":"3579c279-7922-12ac-9f31-e5f09b10ad70","sourcePort":"result","targetId":"0c8695ef-658a-4551-f458-21c099276448","targetPort":"condition"},{"sourceId":"0c8695ef-658a-4551-f458-21c099276448","sourcePort":"ontrue","targetId":"ed5cb279-cf73-edbd-63bc-425bb9870642","targetPort":"to-outlined"},{"sourceId":"0c8695ef-658a-4551-f458-21c099276448","sourcePort":"onfalse","targetId":"ed5cb279-cf73-edbd-63bc-425bb9870642","targetPort":"to-filled"},{"sourceId":"95859f66-e8c5-b0f9-b437-51778f511f01","sourcePort":"hoverStart","targetId":"d8d3274f-4292-6fb5-3347-1d7dc2a450a9","targetPort":"store"},{"sourceId":"95859f66-e8c5-b0f9-b437-51778f511f01","sourcePort":"childIndex","targetId":"d8d3274f-4292-6fb5-3347-1d7dc2a450a9","targetPort":"prop-index hover"},{"sourceId":"95859f66-e8c5-b0f9-b437-51778f511f01","sourcePort":"onClick","targetId":"f7b3ff0f-9d06-209e-c86a-7dfb28a74c98","targetPort":"store"},{"sourceId":"95859f66-e8c5-b0f9-b437-51778f511f01","sourcePort":"childIndex","targetId":"f7b3ff0f-9d06-209e-c86a-7dfb28a74c98","targetPort":"prop-saved index"},{"sourceId":"58032a6e-908e-7cdc-3eb5-1b10185aa84c","sourcePort":"savedValue","targetId":"2d472939-5d26-ffb4-3d81-ae04327bf886","targetPort":"iconSize"},{"sourceId":"58032a6e-908e-7cdc-3eb5-1b10185aa84c","sourcePort":"savedValue","targetId":"7cf98950-e540-0c09-2506-30106861f17b","targetPort":"iconSize"},{"sourceId":"46f9b71a-91c9-d897-591a-cfa1a155bee0","sourcePort":"value-Icon size","targetId":"58032a6e-908e-7cdc-3eb5-1b10185aa84c","targetPort":"value"}],"ports":[],"roots":["95859f66-e8c5-b0f9-b437-51778f511f01"]},{"name":"/#component/Rating","nodes":[{"id":"34ac1a46-17ce-c3f0-48a2-d1dc3de722f5","type":"Group","parameters":{"flexDirection":"row","sizeMode":"contentSize"},"ports":[],"children":[{"id":"530b5af6-43ec-ab3c-be9f-2aa42ed850d5","type":"/#component/Rating/Rating Star Item","parameters":{},"ports":[],"children":[]},{"id":"75f901ea-7326-4b0c-982d-34be7ee9f61e","type":"/#component/Rating/Rating Star Item","parameters":{},"ports":[],"children":[]},{"id":"f107c093-f0b8-dc2d-2de3-ff74de0274b6","type":"/#component/Rating/Rating Star Item","parameters":{},"ports":[],"children":[]},{"id":"04cc6275-6237-97f0-3755-c6098fce7f6f","type":"/#component/Rating/Rating Star Item","parameters":{},"ports":[],"children":[]},{"id":"6d4c7e65-727f-8468-789b-4a60dbf29a56","type":"/#component/Rating/Rating Star Item","parameters":{},"ports":[],"children":[]}]},{"id":"77897411-369d-2224-5b59-69361ea7a05d","type":"net.noodl.ComponentObject","parameters":{"properties":"index hover,saved index,Icon size"},"ports":[],"children":[]},{"id":"d4226f73-5158-26e6-4e70-f47ea7e84e34","type":"net.noodl.SetComponentObjectProperties","parameters":{"properties":"index hover"},"ports":[],"children":[]},{"id":"dd667aa5-c581-2323-ae52-f3333309bf4a","type":"Expression","parameters":{"expression":"savedIndex + 1 "},"ports":[],"children":[]},{"id":"457ed749-9597-7637-94a1-f2cf4965f949","type":"Component Outputs","parameters":{},"ports":[],"children":[]},{"id":"3b88ad36-d5fa-a526-ce4d-fb619bfaaf03","type":"Component Inputs","parameters":{},"ports":[],"children":[]},{"id":"a588cf67-d226-1d60-402f-0f4c3eaafb1f","type":"Number","parameters":{"value":32},"ports":[],"children":[]},{"id":"d0a8a5c8-b521-878d-b641-3a95df57c19e","type":"Number","parameters":{"value":4},"ports":[],"children":[]},{"id":"f06ebc97-cf60-b678-0d68-9d42acc9c7d5","type":"Expression","parameters":{"expression":"val-1"},"ports":[],"children":[]},{"id":"ff88e6da-2f93-c106-357e-e222ef388ee6","type":"net.noodl.SetComponentObjectProperties","parameters":{"properties":"saved index"},"ports":[],"children":[]}],"connections":[{"sourceId":"77897411-369d-2224-5b59-69361ea7a05d","sourcePort":"value-saved index","targetId":"d4226f73-5158-26e6-4e70-f47ea7e84e34","targetPort":"prop-index hover"},{"sourceId":"34ac1a46-17ce-c3f0-48a2-d1dc3de722f5","sourcePort":"hoverEnd","targetId":"d4226f73-5158-26e6-4e70-f47ea7e84e34","targetPort":"store"},{"sourceId":"77897411-369d-2224-5b59-69361ea7a05d","sourcePort":"value-saved index","targetId":"dd667aa5-c581-2323-ae52-f3333309bf4a","targetPort":"savedIndex"},{"sourceId":"dd667aa5-c581-2323-ae52-f3333309bf4a","sourcePort":"result","targetId":"457ed749-9597-7637-94a1-f2cf4965f949","targetPort":"Rating"},{"sourceId":"3b88ad36-d5fa-a526-ce4d-fb619bfaaf03","sourcePort":"Star Size (px)","targetId":"a588cf67-d226-1d60-402f-0f4c3eaafb1f","targetPort":"value"},{"sourceId":"a588cf67-d226-1d60-402f-0f4c3eaafb1f","sourcePort":"savedValue","targetId":"77897411-369d-2224-5b59-69361ea7a05d","targetPort":"value-Icon size"},{"sourceId":"34ac1a46-17ce-c3f0-48a2-d1dc3de722f5","sourcePort":"didMount","targetId":"d4226f73-5158-26e6-4e70-f47ea7e84e34","targetPort":"store"},{"sourceId":"d0a8a5c8-b521-878d-b641-3a95df57c19e","sourcePort":"savedValue","targetId":"d4226f73-5158-26e6-4e70-f47ea7e84e34","targetPort":"prop-index hover"},{"sourceId":"3b88ad36-d5fa-a526-ce4d-fb619bfaaf03","sourcePort":"Rating","targetId":"f06ebc97-cf60-b678-0d68-9d42acc9c7d5","targetPort":"val"},{"sourceId":"f06ebc97-cf60-b678-0d68-9d42acc9c7d5","sourcePort":"result","targetId":"d0a8a5c8-b521-878d-b641-3a95df57c19e","targetPort":"value"},{"sourceId":"d0a8a5c8-b521-878d-b641-3a95df57c19e","sourcePort":"changed","targetId":"d4226f73-5158-26e6-4e70-f47ea7e84e34","targetPort":"store"},{"sourceId":"d0a8a5c8-b521-878d-b641-3a95df57c19e","sourcePort":"savedValue","targetId":"ff88e6da-2f93-c106-357e-e222ef388ee6","targetPort":"prop-saved index"},{"sourceId":"d0a8a5c8-b521-878d-b641-3a95df57c19e","sourcePort":"changed","targetId":"ff88e6da-2f93-c106-357e-e222ef388ee6","targetPort":"store"},{"sourceId":"77897411-369d-2224-5b59-69361ea7a05d","sourcePort":"changed-saved index","targetId":"457ed749-9597-7637-94a1-f2cf4965f949","targetPort":"Rating Changed"},{"sourceId":"3b88ad36-d5fa-a526-ce4d-fb619bfaaf03","sourcePort":"Margin Top","targetId":"34ac1a46-17ce-c3f0-48a2-d1dc3de722f5","targetPort":"marginTop"},{"sourceId":"3b88ad36-d5fa-a526-ce4d-fb619bfaaf03","sourcePort":"Margin Left","targetId":"34ac1a46-17ce-c3f0-48a2-d1dc3de722f5","targetPort":"marginLeft"},{"sourceId":"3b88ad36-d5fa-a526-ce4d-fb619bfaaf03","sourcePort":"Margin Bottom","targetId":"34ac1a46-17ce-c3f0-48a2-d1dc3de722f5","targetPort":"marginBottom"},{"sourceId":"3b88ad36-d5fa-a526-ce4d-fb619bfaaf03","sourcePort":"Margin Right","targetId":"34ac1a46-17ce-c3f0-48a2-d1dc3de722f5","targetPort":"marginRight"},{"sourceId":"3b88ad36-d5fa-a526-ce4d-fb619bfaaf03","sourcePort":"Position","targetId":"34ac1a46-17ce-c3f0-48a2-d1dc3de722f5","targetPort":"position"},{"sourceId":"3b88ad36-d5fa-a526-ce4d-fb619bfaaf03","sourcePort":"Align X","targetId":"34ac1a46-17ce-c3f0-48a2-d1dc3de722f5","targetPort":"alignX"},{"sourceId":"3b88ad36-d5fa-a526-ce4d-fb619bfaaf03","sourcePort":"Align Y","targetId":"34ac1a46-17ce-c3f0-48a2-d1dc3de722f5","targetPort":"alignY"}],"ports":[{"name":"Rating","type":"*","plug":"output","index":1},{"name":"Star Size (px)","type":{"name":"number"},"default":32,"plug":"input","index":1},{"name":"Rating","type":{"name":"*","editAsType":"string"},"group":"Parameters","plug":"input","index":2},{"name":"Rating Changed","type":"signal","plug":"output","index":3},{"name":"Margin Top","type":{"name":"number","units":["px","%"],"defaultUnit":"px","marginPaddingComp":"margin-top"},"group":"Margins","plug":"input","index":3},{"name":"Margin Left","type":{"name":"number","units":["px","%"],"defaultUnit":"px","marginPaddingComp":"margin-left"},"group":"Margins","plug":"input","index":4},{"name":"Margin Bottom","type":{"name":"number","units":["px","%"],"defaultUnit":"px","marginPaddingComp":"margin-bottom"},"group":"Margins","plug":"input","index":5},{"name":"Margin Right","type":{"name":"number","units":["px","%"],"defaultUnit":"px","marginPaddingComp":"margin-right"},"group":"Margins","plug":"input","index":6},{"name":"Position","type":{"name":"enum","enums":[{"label":"In Layout","value":"relative"},{"label":"Absolute","value":"absolute"},{"label":"Sticky","value":"sticky"},{"label":"Fixed","value":"fixed"}]},"default":"relative","group":"Layout","plug":"input","index":7},{"name":"Align X","type":{"name":"enum","enums":[{"label":"Left","value":"left"},{"label":"Center","value":"center"},{"label":"Right","value":"right"}],"alignComp":"horizontal"},"group":"Alignment","plug":"input","index":8},{"name":"Align Y","type":{"name":"enum","enums":[{"label":"Top","value":"top"},{"label":"Center","value":"center"},{"label":"Bottom","value":"bottom"}],"alignComp":"vertical"},"group":"Alignment","plug":"input","index":9}],"roots":["34ac1a46-17ce-c3f0-48a2-d1dc3de722f5"]}]