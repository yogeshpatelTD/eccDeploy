[{"name":"/Reset Password","nodes":[{"id":"f30372e3-f119-92bb-066c-0a279d5ceb42","type":"Page","parameters":{},"ports":[],"children":[{"id":"a86654f3-dfd3-1b8a-2b11-72f6f74cea1a","type":"Group","parameters":{},"ports":[],"children":[{"id":"639cd962-f0b9-83d6-fdba-d51c0ff0a22f","type":"Group","parameters":{"sizeMode":"explicit","height":{"value":60,"unit":"px"},"backgroundColor":"Primary ECC","flexDirection":"row","justifyContent":"space-between"},"ports":[],"children":[{"id":"6d250bdc-8cdf-ae23-578e-0e47c7d78cff","type":"Group","parameters":{"flexDirection":"row","sizeMode":"contentWidth"},"ports":[],"children":[{"id":"5b886071-9a52-0ebb-5f23-b9bbef4a40fc","type":"net.noodl.controls.button","parameters":{"alignY":"center","paddingRight":{"value":5,"unit":"px"},"paddingLeft":{"value":5,"unit":"px"},"paddingTop":{"value":5,"unit":"px"},"paddingBottom":{"value":5,"unit":"px"},"backgroundColor":"transparent","minWidth":{"value":0,"unit":"px"},"useLabel":false,"useIcon":true,"iconIconSource":{"class":"material-icons","code":"arrow_back","codeAsClass":false},"iconSize":{"value":25,"unit":"px"},"marginLeft":{"value":5,"unit":"px"}},"ports":[],"children":[]},{"id":"a38c0e65-7526-4452-94fe-df580c87376a","type":"Text","parameters":{"sizeMode":"contentSize","position":"relative","alignY":"center","color":"White","fontFamily":"fonts/Roboto/Roboto-Bold.ttf","marginLeft":{"value":15,"unit":"px"},"text":"Reset Password"},"ports":[],"children":[]}]},{"id":"412c9ade-fb17-baa8-8a20-7920170b59b2","type":"Image","parameters":{"src":"ecclogo.png","sizeMode":"contentWidth","mixBlendMode":"screen","marginRight":{"value":5,"unit":"px"},"marginTop":{"value":5,"unit":"px"},"marginBottom":{"value":5,"unit":"px"}},"ports":[],"children":[]}]},{"id":"df4c8503-1f31-6443-fb04-4bf593ce1f29","type":"Group","parameters":{"paddingLeft":{"value":10,"unit":"px"},"paddingTop":{"value":10,"unit":"px"},"paddingRight":{"value":10,"unit":"px"},"alignX":"center","maxWidth":{"value":500,"unit":"px"}},"ports":[],"children":[{"id":"138694b2-059c-484a-6ee1-d222db21031c","type":"Text","parameters":{"text":"Enter Email to get reset password link","fontFamily":"fonts/Roboto/Roboto-Medium.ttf","color":"Grey - 800","fontSize":{"value":18,"unit":"px"},"sizeMode":"contentSize","alignX":"center"},"ports":[],"children":[]},{"id":"59348c84-711e-294d-8eee-667fbc65c9a6","type":"net.noodl.controls.textinput","parameters":{"marginTop":{"value":10,"unit":"px"},"label":"Email","placeholder":"login email here","fontSize":{"value":14,"unit":"px"}},"ports":[],"children":[]},{"id":"9ce74188-e84e-d15e-d1e1-79e2224396d4","type":"Text","parameters":{"marginTop":{"value":0,"unit":"px"},"color":"#F64444","fontFamily":"fonts/Roboto/Roboto-Regular.ttf","fontSize":{"value":14,"unit":"px"}},"ports":[],"children":[]},{"id":"9b47df36-7b68-0a65-e286-6555fa84b688","type":"net.noodl.controls.button","parameters":{"marginTop":{"value":10,"unit":"px"},"alignX":"center","backgroundColor":"Primary ECC","label":"Send"},"ports":[],"children":[]}]}]}]},{"id":"997496d4-e981-f555-5d78-3421d66784fe","type":"PageInputs","parameters":{},"ports":[],"children":[]},{"id":"ecc1e7dd-c286-250b-ed65-1a28db05947f","type":"RouterNavigate","parameters":{"router":"notLogin","target":"/login"},"ports":[],"children":[]},{"id":"a82f015f-edf3-8e4f-6377-4f759256914e","type":"JavaScriptFunction","parameters":{"functionScript":"if (!Inputs.Triggered) return;\r\nconst supabase = Noodl.Variables.supabase;\r\n\r\nif (!supabase) throw new Error('Supabase client not found');\r\n\r\nconst email = Inputs.Email\r\n\r\ntry {\r\n  let { data, error } = await supabase.auth.resetPasswordForEmail(email);\r\n\r\n  if (error) {\r\n    console.error(error);\r\n    Outputs.Error = error\r\n    Outputs.Failure();\r\n  } else {\r\n    Outputs.ResetPasswordResponse = data;\r\n    Outputs.Success();\r\n  }\r\n} catch (error) {\r\n  console.error(error);\r\n  Outputs.Failure();\r\n}\r\n"},"ports":[{"name":"in-Triggered","displayName":"Triggered","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-Email","displayName":"Email","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Error","displayName":"Error","plug":"output","type":"*","group":"Outputs","index":8},{"name":"out-ResetPasswordResponse","displayName":"ResetPasswordResponse","plug":"output","type":"*","group":"Outputs","index":9}],"children":[]},{"id":"09704a62-0b43-8402-9a33-038a03153dfd","type":"/#component/loading","parameters":{},"ports":[],"children":[]},{"id":"63f9d55e-a7ae-55bf-75b1-8b86a062ee95","type":"JavaScriptFunction","parameters":{"functionScript":"if (!Inputs.Triggered) return;\r\nconst supabase = Noodl.Variables.supabase;\r\n\r\nif (!supabase) throw new Error('Supabase client not found');\r\n\r\nconst userEmail = Inputs.Email;\r\n\r\ntry {\r\n  const { data, error } = await supabase\r\n    .from('user_master')\r\n    .select('*')\r\n    .eq('login_email', userEmail);\r\n\r\n  if (error) {\r\n    console.error(error);\r\n    Outputs.Failure();\r\n  } else if (data && data.length > 0) {\r\n    if (data[0].enable == false) {\r\n      Outputs.Disable()\r\n    }\r\n    else {\r\n      Outputs.Success()\r\n    }\r\n  } else {\r\n    Outputs.NotFound();\r\n  }\r\n} catch (error) {\r\n  console.error(error);\r\n  Outputs.Failure();\r\n}\r\n"},"ports":[{"name":"in-Triggered","displayName":"Triggered","plug":"input","type":"*","group":"Inputs","index":4},{"name":"in-Email","displayName":"Email","plug":"input","type":"*","group":"Inputs","index":5},{"name":"out-Failure","displayName":"Failure","plug":"output","type":"signal","group":"Outputs","index":6},{"name":"out-Disable","displayName":"Disable","plug":"output","type":"signal","group":"Outputs","index":7},{"name":"out-Success","displayName":"Success","plug":"output","type":"signal","group":"Outputs","index":8},{"name":"out-NotFound","displayName":"NotFound","plug":"output","type":"signal","group":"Outputs","index":9}],"children":[]},{"id":"676816a0-08b2-0dca-3399-70d52f64cdf9","type":"/#component/Show Toast","parameters":{"Type":"Warning","Message":"Email not found"},"ports":[],"children":[]},{"id":"d4c1f9cb-f97b-aac4-d873-cce7a85110b2","type":"/#component/Show Toast","parameters":{"Type":"Success","Message":"Email Sent"},"ports":[],"children":[]},{"id":"5667fb51-7d0b-026d-6751-88cd2a2466ea","type":"noodl.net.validate","parameters":{"Schema":"schema({\nEmail: string().required('Must provide email')\n           .email('Must be a valid email'),\n})\n"},"ports":[],"children":[]},{"id":"8adb0421-8d3a-f49e-b02a-da698916488f","type":"Switch","parameters":{},"ports":[],"children":[]},{"id":"73316e30-efee-d19f-8acf-8bca60a486e5","type":"Condition","parameters":{},"ports":[],"children":[]},{"id":"40d54d34-a273-986c-678c-42bc2377c261","type":"/#component/loading","parameters":{},"ports":[],"children":[]},{"id":"8fb7d236-4df3-b512-5622-abcf2449a07f","type":"/#component/Show Toast","parameters":{"Type":"Warning","Message":"This User is disabled"},"ports":[],"children":[]}],"connections":[{"sourceId":"5b886071-9a52-0ebb-5f23-b9bbef4a40fc","sourcePort":"onClick","targetId":"ecc1e7dd-c286-250b-ed65-1a28db05947f","targetPort":"navigate"},{"sourceId":"59348c84-711e-294d-8eee-667fbc65c9a6","sourcePort":"onTextChanged","targetId":"a82f015f-edf3-8e4f-6377-4f759256914e","targetPort":"in-Email"},{"sourceId":"f30372e3-f119-92bb-066c-0a279d5ceb42","sourcePort":"didMount","targetId":"09704a62-0b43-8402-9a33-038a03153dfd","targetPort":"close"},{"sourceId":"59348c84-711e-294d-8eee-667fbc65c9a6","sourcePort":"onTextChanged","targetId":"63f9d55e-a7ae-55bf-75b1-8b86a062ee95","targetPort":"in-Email"},{"sourceId":"63f9d55e-a7ae-55bf-75b1-8b86a062ee95","sourcePort":"out-NotFound","targetId":"676816a0-08b2-0dca-3399-70d52f64cdf9","targetPort":"Do"},{"sourceId":"a82f015f-edf3-8e4f-6377-4f759256914e","sourcePort":"out-Success","targetId":"d4c1f9cb-f97b-aac4-d873-cce7a85110b2","targetPort":"Do"},{"sourceId":"8adb0421-8d3a-f49e-b02a-da698916488f","sourcePort":"state","targetId":"5667fb51-7d0b-026d-6751-88cd2a2466ea","targetPort":"Enabled"},{"sourceId":"5667fb51-7d0b-026d-6751-88cd2a2466ea","sourcePort":"IsValid","targetId":"73316e30-efee-d19f-8acf-8bca60a486e5","targetPort":"condition"},{"sourceId":"73316e30-efee-d19f-8acf-8bca60a486e5","sourcePort":"ontrue","targetId":"63f9d55e-a7ae-55bf-75b1-8b86a062ee95","targetPort":"in-Triggered"},{"sourceId":"9b47df36-7b68-0a65-e286-6555fa84b688","sourcePort":"onClick","targetId":"8adb0421-8d3a-f49e-b02a-da698916488f","targetPort":"on"},{"sourceId":"9b47df36-7b68-0a65-e286-6555fa84b688","sourcePort":"onClick","targetId":"73316e30-efee-d19f-8acf-8bca60a486e5","targetPort":"eval"},{"sourceId":"59348c84-711e-294d-8eee-667fbc65c9a6","sourcePort":"onTextChanged","targetId":"5667fb51-7d0b-026d-6751-88cd2a2466ea","targetPort":"prop-Email"},{"sourceId":"5667fb51-7d0b-026d-6751-88cd2a2466ea","sourcePort":"err-Email","targetId":"9ce74188-e84e-d15e-d1e1-79e2224396d4","targetPort":"text"},{"sourceId":"5667fb51-7d0b-026d-6751-88cd2a2466ea","sourcePort":"haserr-Email","targetId":"9ce74188-e84e-d15e-d1e1-79e2224396d4","targetPort":"mounted"},{"sourceId":"73316e30-efee-d19f-8acf-8bca60a486e5","sourcePort":"ontrue","targetId":"40d54d34-a273-986c-678c-42bc2377c261","targetPort":"show"},{"sourceId":"63f9d55e-a7ae-55bf-75b1-8b86a062ee95","sourcePort":"out-NotFound","targetId":"40d54d34-a273-986c-678c-42bc2377c261","targetPort":"close"},{"sourceId":"a82f015f-edf3-8e4f-6377-4f759256914e","sourcePort":"out-Success","targetId":"40d54d34-a273-986c-678c-42bc2377c261","targetPort":"close"},{"sourceId":"63f9d55e-a7ae-55bf-75b1-8b86a062ee95","sourcePort":"out-Success","targetId":"a82f015f-edf3-8e4f-6377-4f759256914e","targetPort":"in-Triggered"},{"sourceId":"63f9d55e-a7ae-55bf-75b1-8b86a062ee95","sourcePort":"out-Disable","targetId":"40d54d34-a273-986c-678c-42bc2377c261","targetPort":"close"},{"sourceId":"63f9d55e-a7ae-55bf-75b1-8b86a062ee95","sourcePort":"out-Disable","targetId":"8fb7d236-4df3-b512-5622-abcf2449a07f","targetPort":"Do"}],"ports":[],"roots":["f30372e3-f119-92bb-066c-0a279d5ceb42"]}]